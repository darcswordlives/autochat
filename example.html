<div class="autochat-settings">
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <b>AutoChat</b>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down"></div>
        </div>
        <div class="inline-drawer-content">
            <div>
                <input id="autochat_enabled" type="checkbox" />
                <label for="autochat_enabled">Enable AutoChat</label>
            </div>
            <p><small>Toggle this and refresh - it should remember your choice.</small></p>
            <hr>
            <div class="autochat-time-settings">
                <label for="autochat_startup_time">First Run Timer (seconds):</label>
                <input id="autochat_startup_time" type="number" min="1" max="3600" value="120" />
                <small>This timer is used only for the first run. Also respects the 120s minimum if throttle safety is enabled.</small>
            </div>
            <div class="autochat-time-settings">
                <label for="autochat_min_time">Minimum Time (seconds):</label>
                <input id="autochat_min_time" type="number" min="1" max="3600" value="5" />
            </div>
            <div class="autochat-time-settings">
                <label for="autochat_max_time">Maximum Time (seconds):</label>
                <input id="autochat_max_time" type="number" min="1" max="3600" value="10" placeholder="3600 if blank" />
            </div>
            <div class="autochat-time-settings">
                <label for="autochat_repeat_count">Number of Repeats:</label>
                <input id="autochat_repeat_count" type="number" min="1" placeholder="Infinite if blank" />
            </div>
            <div>
                <input id="autochat_throttle_safety" type="checkbox" />
                <label for="autochat_throttle_safety">Enforce Minimum Time of 120s</label>
                <small>When checked, prevents all timer minimums from being set below 120 seconds.</small>
            </div>
            <div>
                <input id="autochat_use_impersonation" type="checkbox" />
                <label for="autochat_use_impersonation">Use Impersonation</label>
                <small>When checked, sends the prompt below as a user message instead of the template.</small>
            </div>
            <div class="autochat-timer-display">
                <span id="autochat_timer_display">Timer: Stopped</span>
            </div>
            <hr>
            <!-- NEW: Impersonation Prompt Field -->
            <div class="autochat-template-settings">
                <label for="autochat_impersonation_prompt">Impersonation Prompt:</label>
                <textarea id="autochat_impersonation_prompt" rows="4" placeholder="Enter the prompt to send as the user here."></textarea>
                <small>This will be sent as a user message when "Use Impersonation" is checked.</small>
            </div>
            <div class="autochat-template-settings">
                <label for="autochat_message_template">{{user}} Message Template:</label>
                <textarea id="autochat_message_template" rows="4" placeholder="Enter the message template here. Use {seconds} to insert the countdown duration."></textarea>
                <small>Use <code>{seconds}</code> to insert the number of seconds that just elapsed.</small>
            </div>
        </div>
    </div>
</div>
